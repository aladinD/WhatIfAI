<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Applied machine learning - Group xxx: README for the Socialblade Dataset</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Applied machine learning - Group xxx
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README for the Socialblade Dataset </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Data origin</h1>
<p>The data for this data set was scraped from <a href="https://socialblade.com/">Socialblade</a>, a website that tracks daily, monthly and weekly activity of the most influential channels on several big social media platforms such as YouTube, Twitter, Instagram, Facebook etc. We analyzed the available data for all categories and found that only YouTube and Twitter data was sufficiently well tracked to be of any use. Due to time constraints, we focused on YouTube first. In case we find the time during the preprocessing phase, we might add the twitter data later. <br  />
</p>
<p>Since there are no official stats for YouTube's traffic, we want to use the weekly/monthly view counts as a traffic indicator. YouTube or Socialblade do not offer such a view count. Instead, Socialblade offers the statistics for the top 250 subscribed channels per country. Combined with more than 240 country categories available, we can track the data for &gt; 50.000 very influential channels. <br  />
</p>
<p>There are several problems with this. First of all, the top channels right now do not have to include channels that were successful in 2018 for example. Also, if traffic was to mainly increase on mostly unknown channels we would have no chance of tracking it. Also, the data obtained from the website is heavily biased. In 2018, there are about 30.000 tracked channels in the main categories, whereas in 2020 we track more than 50.000. It remains to be seen if we can balance this during preprocessing.</p>
<blockquote class="doxtable">
<p>**_NOTE:_** Dataset is divided into the data categories available on Socialblade. Each category is saved as an individual &gt;pandas data frame in the <a href="./processed">processed folder</a>.</p>
<p></p>
</blockquote>
<h1>Code for scraping</h1>
<p>There were multiple problems with obtaining the data. Since Socialblade is protected against DDoS attacks and bots by <a href="https://www.cloudflare.com/">Cloudflare</a>, we wrote a custom scraper to get the data.The scraping happens in three steps:</p><ol type="1">
<li>Get all countries available on Socialblade.</li>
<li>For each country, get the list of the top 250 subscribed channels.</li>
<li>For each of these &gt; 50.000 channels, scrape all available data from the stats page. <br  />
</li>
</ol>
<p>The two main issues were:</p><ul>
<li>Bypass the Cloudflare bot challenge request.</li>
<li>Bypass the Cloudflare IP block after issuing too many requests.</li>
</ul>
<p>We solved the Cloudflare bot challenge with the <a href="https://pypi.org/project/cloudscraper/">cloudscraper</a> module, a module that can respond to the Javascript request from Cloudflare to imitate a real browser. We then wrote a scraper that wraps around the Cloudscraper module to process the data from the websites HTML code. This was a little more complex than we initially anticipated. The data is saved inside Javascripts and not accessible via HTML tags. The scraper takes care of these problems.</p>
<p>IP blocking was an even bigger issue. In order to prevent this, we connect to a VPN account and change our server as soon as Cloudflare starts blocking our requests. Even then it takes a huge amount of time to scrape all channels. We addressed this by dividing the list of links into smaller work packages, dockerized the scraping process and are able to scrape with up to 6 VPN connections (maximum number of simultaneous connections for our VPN account).</p>
<p>The final workflow was as follows:</p><ul>
<li>Scrape the available countries, scrape their top lists and save the links into work packages by running <a href="../../src/data_collection/social_scraper_lite/work_packages_creator.py">work_packages_creator.py</a>.</li>
<li>Start containers for the work packages with <a href="../../src/data_collection/social_scraper_lite/start_containers.py">start_containers.py</a></li>
</ul>
<p>The complete code can be found in <a href="../../src/data_collection/social_scraper_lite">social_scraper_lite</a>, all Docker related files are located in the <a href="../../src/data_collection/social_scraper_lite/docker">Docker subfolder</a>. Please note that the duplicate files in Docker are intentional to be able to load them into the containers.</p>
<p><img src="screenshot_docker.png" alt="Screenshot Scraping" class="inline"/></p>
<p>In a nutshell, the crawler sends requests until Cloudflare blocks the IP address used. It then switches over to another VPN server, leaving Cloudflare clueless of prior activity.</p>
<h1>Code for preprocessing</h1>
<p>Preprocessing was done by reading the raw data, resampling into consistent time intervals and dropping false values such as negative view counts. The source code for preprocessing is located in the <a href="../../src/data_management/socialblade_processing.py">socialblade_processing.py</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
