<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>What If AI: scrape Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">What If AI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">scrape Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main script for scraping from Socialblade.  
<a href="namespacescrape.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea10499452d562a9e13dc07d9ef7405f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#aea10499452d562a9e13dc07d9ef7405f">load_channel_urls</a> (package_id)</td></tr>
<tr class="memdesc:aea10499452d562a9e13dc07d9ef7405f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the channel urls from the package directory.  <a href="namespacescrape.html#aea10499452d562a9e13dc07d9ef7405f">More...</a><br /></td></tr>
<tr class="separator:aea10499452d562a9e13dc07d9ef7405f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43cb6f05b6e5ed2d6d9872445597877e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a43cb6f05b6e5ed2d6d9872445597877e">load_quicksave</a> (package_id)</td></tr>
<tr class="memdesc:a43cb6f05b6e5ed2d6d9872445597877e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a quicksave from the package directory.  <a href="namespacescrape.html#a43cb6f05b6e5ed2d6d9872445597877e">More...</a><br /></td></tr>
<tr class="separator:a43cb6f05b6e5ed2d6d9872445597877e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce572e5ef7206135fcab42e292a6349"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a3ce572e5ef7206135fcab42e292a6349">clear_dictionary</a> (package_id)</td></tr>
<tr class="memdesc:a3ce572e5ef7206135fcab42e292a6349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears all files from the package directory.  <a href="namespacescrape.html#a3ce572e5ef7206135fcab42e292a6349">More...</a><br /></td></tr>
<tr class="separator:a3ce572e5ef7206135fcab42e292a6349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24121be448d7bacd5082cacbb3ce4813"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a24121be448d7bacd5082cacbb3ce4813">write_results</a> (results, package_id)</td></tr>
<tr class="memdesc:a24121be448d7bacd5082cacbb3ce4813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the results to the package directory.  <a href="namespacescrape.html#a24121be448d7bacd5082cacbb3ce4813">More...</a><br /></td></tr>
<tr class="separator:a24121be448d7bacd5082cacbb3ce4813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f759a85c4ca484e05a586af8d3baba5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a0f759a85c4ca484e05a586af8d3baba5">quicksave</a> (channel_url_list, results, package_id)</td></tr>
<tr class="memdesc:a0f759a85c4ca484e05a586af8d3baba5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a quicksave to the package directory.  <a href="namespacescrape.html#a0f759a85c4ca484e05a586af8d3baba5">More...</a><br /></td></tr>
<tr class="separator:a0f759a85c4ca484e05a586af8d3baba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832e389ce44f72dba244fdd9e2a68a14"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a832e389ce44f72dba244fdd9e2a68a14">change_vpn</a> (server)</td></tr>
<tr class="memdesc:a832e389ce44f72dba244fdd9e2a68a14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the connections VPN server.  <a href="namespacescrape.html#a832e389ce44f72dba244fdd9e2a68a14">More...</a><br /></td></tr>
<tr class="separator:a832e389ce44f72dba244fdd9e2a68a14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972aef5843ba9c0737fb3199b952026e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a972aef5843ba9c0737fb3199b952026e">get_vpn_servers</a> ()</td></tr>
<tr class="memdesc:a972aef5843ba9c0737fb3199b952026e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a list of available NordVPN servers.  <a href="namespacescrape.html#a972aef5843ba9c0737fb3199b952026e">More...</a><br /></td></tr>
<tr class="separator:a972aef5843ba9c0737fb3199b952026e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5653dd5601f9b92af6a260a7fab1ff43"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a5653dd5601f9b92af6a260a7fab1ff43">main</a> ()</td></tr>
<tr class="memdesc:a5653dd5601f9b92af6a260a7fab1ff43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the docker scrape script.  <a href="namespacescrape.html#a5653dd5601f9b92af6a260a7fab1ff43">More...</a><br /></td></tr>
<tr class="separator:a5653dd5601f9b92af6a260a7fab1ff43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adc4ab94f4f796ac74a9d12e69b9c7744"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#adc4ab94f4f796ac74a9d12e69b9c7744">PATH</a> = &quot;/&quot;</td></tr>
<tr class="separator:adc4ab94f4f796ac74a9d12e69b9c7744"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83c42217e2043cfd401f6f5905a161de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a83c42217e2043cfd401f6f5905a161de">PACKAGE_ID</a> = os.environ['PACKAGE']</td></tr>
<tr class="separator:a83c42217e2043cfd401f6f5905a161de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c2beb51a012b7dbddb4f09160261f0"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacescrape.html#a09c2beb51a012b7dbddb4f09160261f0">LOAD_SAVE</a> = &quot;yes&quot;</td></tr>
<tr class="separator:a09c2beb51a012b7dbddb4f09160261f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main script for scraping from Socialblade. </p>
<p>To get as much data as possible from the website, we look for the top 250 channels in more than 240 available country options for a total of &gt; 60.000 channels. These channels are the most successful ones in their respective country, so we assume the data to be representative of the countries Youtube activities.</p>
<p>First, the scraper gets all available country top channel urls and assembles work packages from the results. Then docker containers are used to connect to a VPN, each with a different IP to avoid blocking by Cloudflare. Each container gets a work package assigned. Once all containers finished scraping for the urls of the top 250 channels per country, new work packages are created and again assigned to docker containers with random IPs. After completion of all tasks, the data gets assembled into a single data file. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a832e389ce44f72dba244fdd9e2a68a14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832e389ce44f72dba244fdd9e2a68a14">&#9670;&nbsp;</a></span>change_vpn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.change_vpn </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the connections VPN server. </p>
<dl class="section warning"><dt>Warning</dt><dd>We use NordVPN for our connection. This function will only work with the correct NordVPN setup and installations.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">server</td><td>The NordVPN server address to connect to as string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3ce572e5ef7206135fcab42e292a6349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ce572e5ef7206135fcab42e292a6349">&#9670;&nbsp;</a></span>clear_dictionary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.clear_dictionary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>package_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears all files from the package directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">package_id</td><td>ID of the work package. Specifies the folder to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a972aef5843ba9c0737fb3199b952026e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a972aef5843ba9c0737fb3199b952026e">&#9670;&nbsp;</a></span>get_vpn_servers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.get_vpn_servers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a list of available NordVPN servers. </p>
<p>Server list is filtered to only include servers below 50% capacity and shuffled.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns a list of available servers. </dd></dl>

</div>
</div>
<a id="aea10499452d562a9e13dc07d9ef7405f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea10499452d562a9e13dc07d9ef7405f">&#9670;&nbsp;</a></span>load_channel_urls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.load_channel_urls </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>package_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the channel urls from the package directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">package_id</td><td>ID of the work package. Specifies the folder to load. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the list of channel urls saved in the job. </dd></dl>

</div>
</div>
<a id="a43cb6f05b6e5ed2d6d9872445597877e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43cb6f05b6e5ed2d6d9872445597877e">&#9670;&nbsp;</a></span>load_quicksave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.load_quicksave </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>package_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a quicksave from the package directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">package_id</td><td>ID of the work package. Specifies the folder to load. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the quicksave dictionary. </dd></dl>

</div>
</div>
<a id="a5653dd5601f9b92af6a260a7fab1ff43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5653dd5601f9b92af6a260a7fab1ff43">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the docker scrape script. </p>
<p>Uses the environment variables to scrape the assigned work package and takes care of scraping error handling. Scraping is done with quicksaves to be able to continue the work in case an unforeseen error appears. </p>

</div>
</div>
<a id="a0f759a85c4ca484e05a586af8d3baba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f759a85c4ca484e05a586af8d3baba5">&#9670;&nbsp;</a></span>quicksave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.quicksave </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>channel_url_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>package_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a quicksave to the package directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_url_list</td><td>The list of still unhandled urls. </td></tr>
    <tr><td class="paramname">results</td><td>The results array that was assembled so far. </td></tr>
    <tr><td class="paramname">package_id</td><td>ID of the work package. Specifies the folder to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24121be448d7bacd5082cacbb3ce4813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24121be448d7bacd5082cacbb3ce4813">&#9670;&nbsp;</a></span>write_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def scrape.write_results </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>package_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes the results to the package directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">results</td><td>The result array that is to be saved. </td></tr>
    <tr><td class="paramname">package_id</td><td>ID of the work package. Specifies the folder to load. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a09c2beb51a012b7dbddb4f09160261f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c2beb51a012b7dbddb4f09160261f0">&#9670;&nbsp;</a></span>LOAD_SAVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string scrape.LOAD_SAVE = &quot;yes&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a83c42217e2043cfd401f6f5905a161de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c42217e2043cfd401f6f5905a161de">&#9670;&nbsp;</a></span>PACKAGE_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scrape.PACKAGE_ID = os.environ['PACKAGE']</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adc4ab94f4f796ac74a9d12e69b9c7744"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4ab94f4f796ac74a9d12e69b9c7744">&#9670;&nbsp;</a></span>PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string scrape.PATH = &quot;/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
